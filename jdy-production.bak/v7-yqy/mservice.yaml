apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    com.kingdee.kcs.clusterenv: ""
    com.kingdee.kcs.deploytime: "1585038083"
    deployment.kubernetes.io/revision: "1"
  creationTimestamp: "2020-03-24T08:21:23Z"
  generation: 1
  labels:
    cluster: clustername
  name: mservice
  namespace: clustername
  resourceVersion: "139265"
  selfLink: /apis/extensions/v1beta1/namespaces/clustername/deployments/mservice
  uid: 72d5a725-6da8-11ea-ab79-08002792b40b
spec:
  progressDeadlineSeconds: 600
  replicas: 1
  revisionHistoryLimit: 2
  selector:
    matchLabels:
      app: mservice
      cluster: clustername
      sname: mservice
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  template:
    metadata:
      annotations:
        com.kingdee.kcs.zid: "5"
      creationTimestamp: null
      labels:
        app: mservice
        cluster: clustername
        sname: mservice
    spec:
      containers:
      - env:
        - name: clusterName
          value: clustername
        - name: configUrl
          value: zkconfig
        - name: appName
          value: mservice
        - name: configAppName
          value: mservice
        - name: WEB_PORT
          value: "8080"
        - name: ENABLE_JETTY
          value: "true"
        - name: appSplit
          value: "false"
        - name: APPSTORE_URL
          value: http://nginx_vip:8090/appstore/cosmic
        - name: BIZLIBS
          value: bizweb.xml,hrmp.xml,bamp.xml,mmc.xml,data.xml,pmgt.xml,scmc.xml,tmc.xml,ssc.xml,drp.xml,scm.xml,hr.xml,fi-cal.xml,fi-calx.xml,fi.xml,taxc.xml,isc.xml,epm.xml,swc.xml,pccs.xml,ai.xml,macc.xml
        - name: BOSLIBS
          value: bos.xml,bos-qing
        - name: TRDLIBS
          value: trd.xml
        - name: JVM_OPTS
          value: -server -Xms4096m -Xmx4096m -XX:MaxMetaspaceSize=512m -XX:NativeMemoryTracking=summary
            -Duser.timezone=GMT+8 -Dfile.encoding=UTF-8 -XX:+HeapDumpOnOutOfMemoryError
            -XX:HeapDumpPath=../logs/ -XX:+PrintGCApplicationStoppedTime
            -XX:+DisableExplicitGC -XX:+UseG1GC -XX:+PrintAdaptiveSizePolicy -XX:+PrintGCDetails
            -XX:+PrintGCDateStamps -Xloggc:../logs/gc.%t.log
        - name: webmserviceinone
          value: "true"
        image: kcr.kingdee.com/support/v2.0/mservice:v-20191220
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 600
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 8080
          timeoutSeconds: 3
        name: mservice
        ports:
        - containerPort: 8080
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 8080
          timeoutSeconds: 3
        resources:
          limits:
            cpu: "2"
            memory: 6Gi
          requests:
            cpu: 200m
            memory: 6Gi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /etc/localtime
          name: v-015850380830
          readOnly: true
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      volumes:
      - hostPath:
          path: /etc/localtime
          type: ""
        name: v-015850380830
status:
  conditions:
  - lastTransitionTime: "2020-03-24T08:21:23Z"
    lastUpdateTime: "2020-03-24T08:21:23Z"
    message: Deployment does not have minimum availability.
    reason: MinimumReplicasUnavailable
    status: "False"
    type: Available
  - lastTransitionTime: "2020-03-24T08:21:23Z"
    lastUpdateTime: "2020-03-24T08:21:23Z"
    message: ReplicaSet "mservice-69d66cfcbb" is progressing.
    reason: ReplicaSetUpdated
    status: "True"
    type: Progressing
  observedGeneration: 1
  replicas: 1
  unavailableReplicas: 1
  updatedReplicas: 1
